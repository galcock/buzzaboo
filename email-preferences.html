<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Email Preferences | Buzzaboo</title>
  <meta name="description" content="Manage your email notification preferences on Buzzaboo.">
  <meta name="robots" content="noindex, nofollow">
  
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#8B5CF6">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  
  <script src="js/analytics-service.js" defer></script>
</head>
<body data-page="settings">
  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo">
        <span class="logo-icon">üêù</span>
        <span>Buzzaboo</span>
      </a>
      
      <nav class="nav-menu">
        <a href="index.html" class="nav-link">Home</a>
        <a href="browse.html" class="nav-link">Browse</a>
        <a href="shorts.html" class="nav-link">Shorts</a>
      </nav>
      
      <div class="header-actions">
        <button class="btn btn-secondary btn-sm theme-toggle"><span class="theme-toggle-icon">üåô</span></button>
        <a href="dashboard.html" class="btn btn-primary btn-sm">Go Live</a>
        <div class="user-menu dropdown">
          <div class="dropdown-trigger">
            <img src="https://i.pravatar.cc/150?img=68" alt="Profile" class="user-avatar">
          </div>
          <div class="dropdown-menu">
            <a href="profile.html" class="dropdown-item">üë§ Your Profile</a>
            <a href="dashboard.html" class="dropdown-item">üìä Dashboard</a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">‚öôÔ∏è Settings</a>
            <a href="#" class="dropdown-item">üö™ Log Out</a>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Main Content -->
  <main class="main-content full-width" style="max-width: 800px; margin: 0 auto; padding: 3rem 2rem;">
    <div class="glass-card" style="padding: 2.5rem;">
      <div style="text-align: center; margin-bottom: 2rem;">
        <div style="font-size: 3rem; margin-bottom: 1rem;">üìß</div>
        <h1 style="font-size: 2rem; font-weight: 800; margin-bottom: 0.5rem;">Email Preferences</h1>
        <p class="text-secondary">Choose what emails you'd like to receive from Buzzaboo</p>
      </div>
      
      <form id="email-preferences-form">
        <!-- Subscribed Email -->
        <div style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-lg); margin-bottom: 2rem;">
          <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
            <div>
              <div style="font-weight: 600; margin-bottom: 0.25rem;">Subscribed Email</div>
              <div style="color: var(--text-secondary); font-size: 0.9rem;">user@example.com</div>
            </div>
            <button type="button" class="btn btn-secondary btn-sm">Change Email</button>
          </div>
        </div>
        
        <!-- Streaming & Activity -->
        <div class="preference-section">
          <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;">üé¨ Streaming & Activity</h2>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Stream went live</div>
              <div class="preference-desc">Get notified when channels you follow start streaming</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="stream-live" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Weekly digest</div>
              <div class="preference-desc">Summary of streams you missed from your followed channels</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="weekly-digest" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Clips & highlights</div>
              <div class="preference-desc">New clips and highlights from channels you follow</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="clips" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        
        <!-- Social -->
        <div class="preference-section">
          <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;">üë• Social</h2>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">New followers</div>
              <div class="preference-desc">When someone follows your channel</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="new-followers" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">New subscribers</div>
              <div class="preference-desc">When someone subscribes to your channel</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="new-subscribers" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Mentions & replies</div>
              <div class="preference-desc">When someone mentions you or replies to your comments</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="mentions" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        
        <!-- Creator Updates -->
        <div class="preference-section">
          <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;">üé• Creator Updates</h2>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Stream analytics</div>
              <div class="preference-desc">Weekly summary of your stream performance</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="analytics" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Payout notifications</div>
              <div class="preference-desc">Updates about your earnings and payouts</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="payouts" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Creator tips & resources</div>
              <div class="preference-desc">Educational content to help you grow your channel</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="creator-tips">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        
        <!-- Marketing & Promotions -->
        <div class="preference-section">
          <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;">üéâ Marketing & Promotions</h2>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Featured events</div>
              <div class="preference-desc">Special events, tournaments, and live shows on Buzzaboo</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="featured-events" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Product updates</div>
              <div class="preference-desc">New features and improvements to Buzzaboo</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="product-updates">
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Promotions & offers</div>
              <div class="preference-desc">Special deals, discounts, and exclusive offers</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="promotions">
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item">
            <div class="preference-info">
              <div class="preference-title">Surveys & feedback</div>
              <div class="preference-desc">Opportunities to share your feedback and shape Buzzaboo</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="surveys">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        
        <!-- Security & Account -->
        <div class="preference-section">
          <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;">üîí Security & Account</h2>
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">These emails help keep your account secure and cannot be disabled.</p>
          
          <div class="preference-item disabled">
            <div class="preference-info">
              <div class="preference-title">Login alerts</div>
              <div class="preference-desc">Suspicious login attempts and new device logins</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="login-alerts" checked disabled>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item disabled">
            <div class="preference-info">
              <div class="preference-title">Password & security changes</div>
              <div class="preference-desc">Confirmations of password changes and security settings</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="security-changes" checked disabled>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="preference-item disabled">
            <div class="preference-info">
              <div class="preference-title">Terms & policy updates</div>
              <div class="preference-desc">Important updates to our Terms of Service and policies</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" name="policy-updates" checked disabled>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        
        <!-- Email Frequency -->
        <div class="preference-section">
          <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;">‚è∞ Email Frequency</h2>
          
          <div style="display: flex; flex-direction: column; gap: 1rem;">
            <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer; padding: 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md);">
              <input type="radio" name="frequency" value="instant" checked style="width: 20px; height: 20px;">
              <div>
                <div style="font-weight: 600;">Instant</div>
                <div style="color: var(--text-secondary); font-size: 0.85rem;">Get emails as events happen</div>
              </div>
            </label>
            
            <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer; padding: 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md);">
              <input type="radio" name="frequency" value="daily" style="width: 20px; height: 20px;">
              <div>
                <div style="font-weight: 600;">Daily Digest</div>
                <div style="color: var(--text-secondary); font-size: 0.85rem;">One email per day with all updates</div>
              </div>
            </label>
            
            <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer; padding: 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md);">
              <input type="radio" name="frequency" value="weekly" style="width: 20px; height: 20px;">
              <div>
                <div style="font-weight: 600;">Weekly Summary</div>
                <div style="color: var(--text-secondary); font-size: 0.85rem;">Weekly roundup of activity</div>
              </div>
            </label>
          </div>
        </div>
        
        <!-- Unsubscribe All -->
        <div style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-lg); margin-top: 2rem;">
          <div style="display: flex; align-items: start; gap: 1rem;">
            <div style="font-size: 2rem;">‚ö†Ô∏è</div>
            <div style="flex: 1;">
              <h3 style="font-weight: 700; margin-bottom: 0.5rem;">Unsubscribe from all emails</h3>
              <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">You'll still receive critical security and account emails, but nothing else.</p>
              <button type="button" id="unsubscribe-all-btn" class="btn btn-ghost" style="color: var(--accent-red);">
                Unsubscribe from all
              </button>
            </div>
          </div>
        </div>
        
        <!-- Save Button -->
        <div style="display: flex; gap: 1rem; margin-top: 2rem; justify-content: flex-end;">
          <button type="button" class="btn btn-secondary" onclick="window.history.back()">Cancel</button>
          <button type="submit" class="btn btn-primary">üíæ Save Preferences</button>
        </div>
      </form>
      
      <!-- Success Toast (hidden by default) -->
      <div id="success-toast" style="display: none; position: fixed; bottom: 2rem; right: 2rem; background: var(--accent-green); color: white; padding: 1rem 1.5rem; border-radius: var(--radius-lg); box-shadow: var(--glass-shadow); z-index: 1000;">
        ‚úÖ Email preferences saved!
      </div>
    </div>
  </main>
  
  <!-- Footer -->
  <footer style="padding: 2rem; border-top: 1px solid var(--glass-border); background: var(--bg-secondary); margin-top: 3rem;">
    <div style="text-align: center;">
      <p style="font-size: 0.8rem; color: var(--text-muted);">¬© 2026 Buzzaboo. All rights reserved.</p>
    </div>
  </footer>
  
  <script src="js/app.js"></script>
  <script>
    const form = document.getElementById('email-preferences-form');
    const successToast = document.getElementById('success-toast');
    const unsubscribeAllBtn = document.getElementById('unsubscribe-all-btn');
    
    // Form submission
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      
      // Collect preferences
      const preferences = {
        streamLive: form['stream-live'].checked,
        weeklyDigest: form['weekly-digest'].checked,
        clips: form['clips'].checked,
        newFollowers: form['new-followers'].checked,
        newSubscribers: form['new-subscribers'].checked,
        mentions: form['mentions'].checked,
        analytics: form['analytics'].checked,
        payouts: form['payouts'].checked,
        creatorTips: form['creator-tips'].checked,
        featuredEvents: form['featured-events'].checked,
        productUpdates: form['product-updates'].checked,
        promotions: form['promotions'].checked,
        surveys: form['surveys'].checked,
        frequency: form['frequency'].value
      };
      
      // Track analytics
      if (window.AnalyticsService) {
        window.AnalyticsService.trackEmailPreferences(preferences);
      }
      
      // In production, send to backend
      console.log('Email preferences saved:', preferences);
      localStorage.setItem('buzzaboo_email_preferences', JSON.stringify(preferences));
      
      // Show success toast
      successToast.style.display = 'block';
      setTimeout(() => {
        successToast.style.display = 'none';
      }, 3000);
    });
    
    // Unsubscribe all
    unsubscribeAllBtn.addEventListener('click', () => {
      if (confirm('Are you sure you want to unsubscribe from all non-essential emails?')) {
        // Uncheck all non-disabled checkboxes
        const checkboxes = form.querySelectorAll('input[type="checkbox"]:not([disabled])');
        checkboxes.forEach(cb => cb.checked = false);
        
        // Trigger save
        form.dispatchEvent(new Event('submit'));
      }
    });
    
    // Load saved preferences
    window.addEventListener('DOMContentLoaded', () => {
      const saved = localStorage.getItem('buzzaboo_email_preferences');
      if (saved) {
        try {
          const preferences = JSON.parse(saved);
          // Apply saved preferences to form
          Object.keys(preferences).forEach(key => {
            const input = form[key.replace(/([A-Z])/g, '-$1').toLowerCase()];
            if (input) {
              if (input.type === 'checkbox') {
                input.checked = preferences[key];
              } else if (input.type === 'radio') {
                const radio = form.querySelector(`input[name="frequency"][value="${preferences[key]}"]`);
                if (radio) radio.checked = true;
              }
            }
          });
        } catch (e) {
          console.error('Failed to load preferences', e);
        }
      }
    });
  </script>
  
  <style>
    .preference-section {
      margin-bottom: 2.5rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid var(--glass-border);
    }
    
    .preference-section:last-of-type {
      border-bottom: none;
    }
    
    .preference-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      background: var(--bg-tertiary);
      border-radius: var(--radius-md);
      margin-bottom: 0.75rem;
      gap: 1rem;
    }
    
    .preference-item.disabled {
      opacity: 0.6;
    }
    
    .preference-info {
      flex: 1;
    }
    
    .preference-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }
    
    .preference-desc {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    
    /* Toggle Switch */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 26px;
      flex-shrink: 0;
    }
    
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--bg-primary);
      border: 2px solid var(--glass-border);
      transition: 0.3s;
      border-radius: 26px;
    }
    
    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 2px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }
    
    input:checked + .toggle-slider {
      background-color: var(--primary);
      border-color: var(--primary);
    }
    
    input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }
    
    input:disabled + .toggle-slider {
      cursor: not-allowed;
      opacity: 0.6;
    }
  </style>
</body>
</html>

<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up | Buzzaboo</title>
  <meta name="description" content="Create your Buzzaboo account - Join the next-gen live streaming platform">
  
  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#8B5CF6">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="css/auth.css">
</head>
<body data-page="signup" class="auth-page">
  <!-- Animated Background -->
  <div class="auth-bg">
    <div class="auth-bg-gradient"></div>
    <div class="auth-bg-grid"></div>
    <div class="auth-bg-orb auth-bg-orb-1"></div>
    <div class="auth-bg-orb auth-bg-orb-2"></div>
    <div class="auth-bg-orb auth-bg-orb-3"></div>
  </div>

  <!-- Main Content -->
  <main class="auth-container">
    <!-- Logo -->
    <a href="index.html" class="auth-logo">
      <span class="logo-icon">üêù</span>
      <span>Buzzaboo</span>
    </a>

    <!-- Auth Card -->
    <div class="auth-card glass-card">
      <div class="auth-header">
        <h1 class="auth-title">Create your account</h1>
        <p class="auth-subtitle">Join millions of creators and viewers on Buzzaboo</p>
      </div>

      <!-- Success Messages -->
      <div class="auth-message auth-message-success" id="successMessage" style="display: none;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
        <span id="successText">Success!</span>
      </div>

      <!-- Error Messages -->
      <div class="auth-message auth-message-error" id="errorMessage" style="display: none;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
        <span id="errorText">An error occurred</span>
      </div>

      <!-- Social Login -->
      <div class="auth-social">
        <button type="button" class="btn btn-social btn-google" id="googleSignupBtn">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          <span>Sign up with Google</span>
        </button>

        <button type="button" class="btn btn-social btn-apple" id="appleSignupBtn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
          </svg>
          <span>Sign up with Apple</span>
        </button>
      </div>

      <div class="auth-divider">
        <span>or sign up with email</span>
      </div>

      <!-- Signup Form -->
      <form id="signupForm" class="auth-form">
        <div class="form-group">
          <label for="displayName" class="form-label">Display Name</label>
          <div class="input-wrapper">
            <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <input type="text" id="displayName" name="displayName" class="form-input" placeholder="Your display name" required autocomplete="name" minlength="2" maxlength="50">
          </div>
        </div>

        <div class="form-group">
          <label for="email" class="form-label">Email</label>
          <div class="input-wrapper">
            <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
            <input type="email" id="email" name="email" class="form-input" placeholder="your@email.com" required autocomplete="email">
          </div>
        </div>

        <div class="form-group">
          <label for="password" class="form-label">Password</label>
          <div class="input-wrapper">
            <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            <input type="password" id="password" name="password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="new-password" minlength="6">
            <button type="button" class="input-toggle-password" aria-label="Toggle password visibility">
              <svg class="eye-open" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              <svg class="eye-closed" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="display:none"><path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/></svg>
            </button>
          </div>
          <div class="password-strength" id="passwordStrength">
            <div class="strength-bar"><span></span></div>
            <span class="strength-text">Password strength</span>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword" class="form-label">Confirm Password</label>
          <div class="input-wrapper">
            <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            <input type="password" id="confirmPassword" name="confirmPassword" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="new-password" minlength="6">
          </div>
        </div>

        <div class="form-group">
          <label class="form-checkbox">
            <input type="checkbox" id="terms" name="terms" required>
            <span class="checkbox-custom"></span>
            <span class="checkbox-label">I agree to the <a href="#" class="form-link-inline">Terms of Service</a> and <a href="#" class="form-link-inline">Privacy Policy</a></span>
          </label>
        </div>

        <button type="submit" class="btn btn-primary btn-lg btn-block" id="signupBtn">
          <span class="btn-text">Create Account</span>
          <span class="btn-loader" style="display: none;">
            <svg class="spinner" width="20" height="20" viewBox="0 0 24 24"><circle class="spinner-track" cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="3" opacity="0.3"/><path class="spinner-head" d="M12 2a10 10 0 0 1 10 10" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/></svg>
          </span>
        </button>
      </form>

      <div class="auth-footer">
        <p>Already have an account? <a href="login.html" class="auth-link">Sign in</a></p>
      </div>
    </div>

    <!-- Terms -->
    <p class="auth-terms">
      By creating an account, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
    </p>
  </main>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <!-- Auth Scripts -->
  <script src="js/firebase-config.js"></script>
  <script src="js/auth-service.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Toggle password visibility
      document.querySelectorAll('.input-toggle-password').forEach(btn => {
        btn.addEventListener('click', () => {
          const input = btn.parentElement.querySelector('input');
          const eyeOpen = btn.querySelector('.eye-open');
          const eyeClosed = btn.querySelector('.eye-closed');
          
          if (input.type === 'password') {
            input.type = 'text';
            eyeOpen.style.display = 'none';
            eyeClosed.style.display = 'block';
          } else {
            input.type = 'password';
            eyeOpen.style.display = 'block';
            eyeClosed.style.display = 'none';
          }
        });
      });

      // Password strength indicator
      const passwordInput = document.getElementById('password');
      const strengthBar = document.querySelector('.strength-bar span');
      const strengthText = document.querySelector('.strength-text');

      passwordInput.addEventListener('input', () => {
        const password = passwordInput.value;
        const strength = calculatePasswordStrength(password);
        
        strengthBar.style.width = `${strength.score * 25}%`;
        strengthBar.className = strength.class;
        strengthText.textContent = strength.text;
      });

      // Signup form submission
      const signupForm = document.getElementById('signupForm');
      signupForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const displayName = document.getElementById('displayName').value.trim();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const terms = document.getElementById('terms').checked;

        // Validation
        if (password !== confirmPassword) {
          showError('Passwords do not match');
          return;
        }

        if (password.length < 6) {
          showError('Password must be at least 6 characters');
          return;
        }

        if (!terms) {
          showError('Please agree to the Terms of Service');
          return;
        }
        
        setLoading(true);
        hideMessages();

        const result = await buzzabooAuth.signUpWithEmail(email, password, displayName);
        
        setLoading(false);

        if (result.success) {
          showSuccess('Account created! Please check your email to verify your account.');
          setTimeout(() => {
            window.location.href = '/login.html?signup=success';
          }, 2000);
        } else {
          showError(result.error);
        }
      });

      // Google signup
      document.getElementById('googleSignupBtn').addEventListener('click', async () => {
        hideMessages();
        setLoading(true, 'google');
        
        const result = await buzzabooAuth.signInWithGoogle();
        
        setLoading(false, 'google');
        
        if (result.success) {
          window.location.href = '/index.html';
        } else if (result.error !== 'Sign in cancelled') {
          showError(result.error);
        }
      });

      // Apple signup
      document.getElementById('appleSignupBtn').addEventListener('click', async () => {
        hideMessages();
        setLoading(true, 'apple');
        
        const result = await buzzabooAuth.signInWithApple();
        
        setLoading(false, 'apple');
        
        if (result.success) {
          window.location.href = '/index.html';
        } else if (result.error !== 'Sign in cancelled') {
          showError(result.error);
        }
      });

      // Redirect if already logged in
      window.addEventListener('buzzaboo-auth-ready', () => {
        if (buzzabooAuth.isAuthenticated()) {
          window.location.href = '/index.html';
        }
      });
    });

    function calculatePasswordStrength(password) {
      let score = 0;
      
      if (password.length >= 6) score++;
      if (password.length >= 10) score++;
      if (/[a-z]/.test(password) && /[A-Z]/.test(password)) score++;
      if (/\d/.test(password)) score++;
      if (/[^a-zA-Z0-9]/.test(password)) score++;
      
      const levels = [
        { score: 0, text: 'Too weak', class: 'weak' },
        { score: 1, text: 'Weak', class: 'weak' },
        { score: 2, text: 'Fair', class: 'fair' },
        { score: 3, text: 'Good', class: 'good' },
        { score: 4, text: 'Strong', class: 'strong' },
        { score: 5, text: 'Very strong', class: 'strong' }
      ];
      
      return { ...levels[Math.min(score, 5)], score };
    }

    function setLoading(loading, provider = 'email') {
      const signupBtn = document.getElementById('signupBtn');
      const googleBtn = document.getElementById('googleSignupBtn');
      const appleBtn = document.getElementById('appleSignupBtn');
      
      if (provider === 'email') {
        signupBtn.disabled = loading;
        signupBtn.querySelector('.btn-text').style.display = loading ? 'none' : 'inline';
        signupBtn.querySelector('.btn-loader').style.display = loading ? 'inline-flex' : 'none';
      } else if (provider === 'google') {
        googleBtn.disabled = loading;
        googleBtn.classList.toggle('loading', loading);
      } else if (provider === 'apple') {
        appleBtn.disabled = loading;
        appleBtn.classList.toggle('loading', loading);
      }
    }

    function showError(message) {
      const errorEl = document.getElementById('errorMessage');
      document.getElementById('errorText').textContent = message;
      errorEl.style.display = 'flex';
      errorEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    function showSuccess(message) {
      const successEl = document.getElementById('successMessage');
      document.getElementById('successText').textContent = message;
      successEl.style.display = 'flex';
    }

    function hideMessages() {
      document.getElementById('errorMessage').style.display = 'none';
      document.getElementById('successMessage').style.display = 'none';
    }
  </script>
</body>
</html>

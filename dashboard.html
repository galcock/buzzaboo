<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creator Dashboard | Buzzaboo</title>
  <meta name="description" content="Buzzaboo Creator Dashboard. Manage your streams, view analytics, and grow your channel.">
  
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#8B5CF6">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="css/livekit.css">
  <link rel="stylesheet" href="css/auth.css">
</head>
<body data-page="dashboard">
  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo">
        <span class="logo-icon">ğŸ</span>
        <span>Buzzaboo</span>
      </a>
      
      <nav class="nav-menu">
        <a href="index.html" class="nav-link">Home</a>
        <a href="browse.html" class="nav-link">Browse</a>
        <a href="dashboard.html" class="nav-link active">Dashboard</a>
      </nav>
      
      <div class="header-actions">
        <button class="btn btn-secondary btn-sm theme-toggle"><span class="theme-toggle-icon">ğŸŒ™</span></button>
        <div class="user-menu dropdown">
          <div class="dropdown-trigger">
            <img src="https://i.pravatar.cc/150?img=68" alt="Profile" class="user-avatar auth-avatar">
            <span class="user-name auth-display-name">You</span>
          </div>
          <div class="dropdown-menu">
            <a href="profile.html" class="dropdown-item">ğŸ‘¤ Your Profile</a>
            <a href="dashboard.html" class="dropdown-item active">ğŸ“Š Dashboard</a>
            <a href="call.html" class="dropdown-item">ğŸ“¹ Video Call</a>
            <a href="settings.html" class="dropdown-item">âš™ï¸ Settings</a>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item logout-btn">ğŸšª Log Out</button>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Dashboard Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-section">
      <div class="sidebar-title">Dashboard</div>
      <a href="#" class="sidebar-item active">
        <span>ğŸ“Š</span>
        <span class="sidebar-item-name">Overview</span>
      </a>
      <a href="#" class="sidebar-item">
        <span>ğŸ“ˆ</span>
        <span class="sidebar-item-name">Analytics</span>
      </a>
      <a href="#" class="sidebar-item">
        <span>ğŸ’°</span>
        <span class="sidebar-item-name">Revenue</span>
      </a>
      <a href="#" class="sidebar-item">
        <span>ğŸ¬</span>
        <span class="sidebar-item-name">Content</span>
      </a>
      <a href="#" class="sidebar-item">
        <span>ğŸ‘¥</span>
        <span class="sidebar-item-name">Community</span>
      </a>
    </div>
    
    <div class="sidebar-section">
      <div class="sidebar-title">Stream</div>
      <a href="#" class="sidebar-item">
        <span>âš™ï¸</span>
        <span class="sidebar-item-name">Stream Settings</span>
      </a>
      <a href="#" class="sidebar-item">
        <span>ğŸ¯</span>
        <span class="sidebar-item-name">Predictions</span>
      </a>
      <a href="#" class="sidebar-item">
        <span>ğŸ</span>
        <span class="sidebar-item-name">Rewards</span>
      </a>
      <a href="#" class="sidebar-item">
        <span>ğŸ¤–</span>
        <span class="sidebar-item-name">AI Tools</span>
      </a>
    </div>
    
    <div class="sidebar-section">
      <div class="sidebar-title">Settings</div>
      <a href="#" class="sidebar-item">
        <span>ğŸ‘¤</span>
        <span class="sidebar-item-name">Profile</span>
      </a>
      <a href="#" class="sidebar-item">
        <span>ğŸ””</span>
        <span class="sidebar-item-name">Notifications</span>
      </a>
      <a href="#" class="sidebar-item">
        <span>ğŸ›¡ï¸</span>
        <span class="sidebar-item-name">Moderation</span>
      </a>
    </div>
  </aside>
  
  <!-- Main Content -->
  <main class="main-content">
    <!-- Page Header -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
      <div>
        <h1 style="font-size: 2rem; font-weight: 800; margin-bottom: 0.25rem;">Creator Dashboard</h1>
        <p style="color: var(--text-secondary);">Welcome back! Here's how your channel is performing.</p>
      </div>
    </div>
    
    <!-- Go Live Section -->
    <section class="section" style="margin-bottom: 2rem;">
      <div class="section-header">
        <h2 class="section-title">ğŸ”´ Start Streaming</h2>
      </div>
      <div class="glass-card" style="padding: 1.5rem;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
          <!-- Broadcast Controls -->
          <div id="broadcast-controls"></div>
          
          <!-- Stream Settings -->
          <div>
            <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">Stream Settings</h3>
            <div class="form-group" style="margin-bottom: 1rem;">
              <label class="form-label">Stream Title</label>
              <input type="text" class="form-input" value="ğŸ”´ LIVE - Let's go! | !discord !socials" placeholder="Enter stream title">
            </div>
            
            <div class="form-group" style="margin-bottom: 1rem;">
              <label class="form-label">Category</label>
              <select class="form-input form-select">
                <option>Just Chatting</option>
                <option>Gaming</option>
                <option>Music</option>
                <option>Art</option>
              </select>
            </div>
            
            <div class="form-group" style="margin-bottom: 1rem;">
              <label class="form-label">Quality Preset</label>
              <select class="form-input form-select" id="quality-preset">
                <option value="1080p">1080p @ 30fps (Best)</option>
                <option value="720p" selected>720p @ 30fps (Recommended)</option>
                <option value="480p">480p @ 30fps (Low bandwidth)</option>
              </select>
            </div>
            
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
              <label class="form-checkbox">
                <input type="checkbox" checked>
                <span>Enable Chat</span>
              </label>
              <label class="form-checkbox">
                <input type="checkbox" checked>
                <span>AI Highlights</span>
              </label>
              <label class="form-checkbox">
                <input type="checkbox" checked>
                <span>Allow Clips</span>
              </label>
            </div>
            
            <!-- Sub-Only Chat Toggle -->
            <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--glass-border);">
              <div id="subOnlyChatToggle"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Stats Cards -->
    <div class="dashboard-grid" id="dashboard-stats"></div>
    
    <!-- Main Dashboard Content -->
    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; margin-top: 2rem;">
      <!-- Charts -->
      <div class="chart-container glass-card" id="dashboard-chart"></div>
      
      <!-- Activity -->
      <div class="glass-card" style="padding: 1.5rem;" id="dashboard-activity"></div>
    </div>
    
    <!-- Revenue Transparency -->
    <section class="section" style="margin-top: 2rem;">
      <div class="section-header">
        <h2 class="section-title">ğŸ’° Revenue Breakdown (This Month)</h2>
      </div>
      <div class="glass-card" style="padding: 1.5rem;">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
          <div style="flex: 1;">
            <p style="color: var(--text-secondary); margin-bottom: 0.25rem;">Total Earnings</p>
            <div style="font-size: 2.5rem; font-weight: 800; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">$12,450.00</div>
          </div>
          <button class="btn btn-secondary">Payout Settings</button>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--glass-border);">
            <span>â­ Subscriptions</span>
            <span style="font-weight: 600;">$7,230.00</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--glass-border);">
            <span>ğŸ’ Bits & Tips</span>
            <span style="font-weight: 600;">$2,845.00</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--glass-border);">
            <span>ğŸ¯ Ad Revenue</span>
            <span style="font-weight: 600;">$1,560.00</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 12px 0;">
            <span>ğŸ Sponsorships</span>
            <span style="font-weight: 600;">$815.00</span>
          </div>
        </div>
        
        <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--glass-border);">
          <p style="font-size: 0.85rem; color: var(--text-secondary); display: flex; align-items: center; gap: 0.5rem;">
            <span style="color: var(--accent-green);">âœ“</span>
            Buzzaboo takes 0% cut for the first year. After that, only 5% - the lowest in the industry.
          </p>
        </div>
      </div>
    </section>
    
    <!-- AI Tools -->
    <section class="section" style="margin-top: 2rem;">
      <div class="section-header">
        <h2 class="section-title">ğŸ¤– AI Tools</h2>
      </div>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
        <div class="glass-card" style="padding: 1.5rem; text-align: center;">
          <div style="font-size: 2.5rem; margin-bottom: 1rem;">âœ‚ï¸</div>
          <h3 style="font-weight: 700; margin-bottom: 0.5rem;">Auto Clips</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">AI detects exciting moments and creates clips automatically</p>
          <button class="btn btn-secondary btn-sm">Configure</button>
        </div>
        
        <div class="glass-card" style="padding: 1.5rem; text-align: center;">
          <div style="font-size: 2.5rem; margin-bottom: 1rem;">ğŸ¬</div>
          <h3 style="font-weight: 700; margin-bottom: 0.5rem;">Highlight Reels</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">Generate highlight compilations from your streams</p>
          <button class="btn btn-secondary btn-sm">Generate</button>
        </div>
        
        <div class="glass-card" style="padding: 1.5rem; text-align: center;">
          <div style="font-size: 2.5rem; margin-bottom: 1rem;">ğŸ“</div>
          <h3 style="font-weight: 700; margin-bottom: 0.5rem;">Title Generator</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">AI suggests engaging titles for your clips</p>
          <button class="btn btn-secondary btn-sm">Try It</button>
        </div>
        
        <div class="glass-card" style="padding: 1.5rem; text-align: center;">
          <div style="font-size: 2.5rem; margin-bottom: 1rem;">ğŸ›¡ï¸</div>
          <h3 style="font-weight: 700; margin-bottom: 0.5rem;">Smart Moderation</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">AI-powered chat moderation and spam detection</p>
          <button class="btn btn-secondary btn-sm">Settings</button>
        </div>
      </div>
    </section>
  </main>
  
  <!-- LiveKit SDK -->
  <script src="https://unpkg.com/livekit-client@2.0.7/dist/livekit-client.umd.js"></script>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <!-- Buzzaboo Scripts -->
  <script src="js/firebase-config.js"></script>
  <script src="js/auth-service.js"></script>
  <script src="js/livekit-service.js"></script>
  <script src="js/stream-components.js"></script>
  <script src="js/stripe-service.js"></script>
  <script src="js/subscription-components.js"></script>
  <script src="js/app.js"></script>
  
  <!-- Auth Protection -->
  <script>
    // Require auth for dashboard
    window.addEventListener('buzzaboo-auth-ready', () => {
      if (!buzzabooAuth.isAuthenticated()) {
        window.location.href = '/login.html?redirect=/dashboard.html';
        return;
      }
      
      // Update UI with user info
      const profile = buzzabooAuth.getProfile();
      if (profile) {
        document.querySelectorAll('.auth-avatar').forEach(el => {
          if (el.tagName === 'IMG') {
            el.src = profile.avatar || buzzabooAuth.getAvatarUrl();
          }
        });
        document.querySelectorAll('.auth-display-name').forEach(el => {
          el.textContent = profile.displayName || 'You';
        });
      }
    });
    
    // Logout handler
    document.querySelectorAll('.logout-btn').forEach(btn => {
      btn.addEventListener('click', async () => {
        await buzzabooAuth.signOut();
        window.location.href = '/login.html';
      });
    });
  </script>
  
  <script>
    // Initialize sub-only chat toggle
    const subOnlyToggle = document.getElementById('subOnlyChatToggle');
    if (subOnlyToggle) {
      subOnlyToggle.innerHTML = SubscriptionComponents.createSubOnlyChatToggle(false);
    }
  </script>
  
  <style>
    @media (max-width: 1024px) {
      .sidebar { transform: translateX(-100%); }
      .main-content { margin-left: 0 !important; }
      .dashboard-grid { grid-template-columns: repeat(2, 1fr) !important; }
      
      .glass-card > div[style*="grid-template-columns: 1fr 1fr"] {
        grid-template-columns: 1fr !important;
      }
    }
    @media (max-width: 768px) {
      .dashboard-grid { grid-template-columns: 1fr !important; }
      .main-content > div[style*="grid-template-columns: 2fr 1fr"] {
        grid-template-columns: 1fr !important;
      }
    }
  </style>
</body>
</html>
